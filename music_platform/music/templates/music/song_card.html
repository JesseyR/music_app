<!-- templates/songs/includes/song_card.html -->

<div class="card h-100 song-card shadow-sm">
    {% if song.album.cover_image %}
        <img src="{{ song.album.cover_image.url }}" class="card-img-top album-cover" alt="{{ song.album.name }} cover">
    {% else %}
        <div class="card-img-top album-cover-placeholder d-flex align-items-center justify-content-center bg-light">
            <i class="fas fa-music fa-3x text-muted"></i>
        </div>
    {% endif %}
    <div class="card-body">
        <h5 class="card-title">
            <a href="{% url 'song_detail' song.id %}" class="text-decoration-none">
                {{ song.title }}
            </a>
        </h5>
        <h6 class="card-subtitle mb-2 text-muted">{{ song.album.name }}</h6>
        <p class="card-text">
            <span class="badge bg-light text-dark"><i class="far fa-clock me-1"></i>{{ song.duration }}</span>
            {% if song.artist %}
                <span class="badge bg-info text-dark"><i class="fas fa-user me-1"></i>{{ song.artist }}</span>
            {% endif %}
        </p>
    </div>
    <div class="card-footer bg-transparent d-flex justify-content-between">
        <button class="btn btn-sm btn-outline-secondary play-song-btn" 
                data-song-id="{{ song.id }}"
                data-song-url="{{ song.file.url }}"
                data-song-title="{{ song.title }}"
                data-song-artist="{% if song.artist %}{{ song.artist }}{% else %}Unknown Artist{% endif %}"
                data-song-cover="{% if song.album.cover_image %}{{ song.album.cover_image.url }}{% else %}/static/images/default-cover.jpg{% endif %}">
            <i class="fas fa-play me-1"></i> Play
        </button>
        <button class="btn btn-sm btn-outline-primary add-to-playlist-btn"
                data-song-id="{{ song.id }}"
                data-song-url="{{ song.file.url }}"
                data-song-title="{{ song.title }}"
                data-song-artist="{% if song.artist %}{{ song.artist }}{% else %}Unknown Artist{% endif %}"
                data-song-cover="{% if song.album.cover_image %}{{ song.album.cover_image.url }}{% else %}/static/images/default-cover.jpg{% endif %}">
            <i class="fas fa-plus me-1"></i> Add to Playlist
        </button>
    </div>
</div>